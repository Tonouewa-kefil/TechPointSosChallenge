#:import ZBarCam kivy_garden.zbarcam.ZBarCam
#:import ZBarSymbol pyzbar.pyzbar.ZBarSymbol

TransitionAppManagement:
    HomeScreen:
    CreateAccountScreen:
    MainScreen:
    ProfileScreen:
    TransportationHistoryScreen:
    ItemDescriptionScreen:
    ScannerScreen:

<HomeScreen>:
    name:"Home"
    username: username
    password: password
    sign_in:  sign_in
    create_account: create_account
    authentification_status: authentification_status


    FloatLayout:
        #verified
        TextInput:
            id: username
            font_size: root.height * 0.025
            size_hint: 0.504,0.05
            pos_hint:{"top":0.72,"x":0.255}
            text:"Username"
            multiline: False
        #verified
        TextInput:
            id: password
            font_size: root.height * 0.025
            size_hint: 0.504,0.05
            pos_hint:{"top":0.63,"x":0.255}
            text:"Password"
            multiline: False
        Label:
            id: authentification_status
            font_size: root.height * 0.015
            color:(1,0,0,1)
            size_hint: 0.504,0.05
            pos_hint:{"top":0.50,"x":0.255}
            text:""
            multiline: False
        #verified
        Button:
            id: sign_in
            font_size: 13
            size_hint:0.31,0.035
            pos_hint:{"top":0.53,"x":0.345}
            text:"Sign in"
            background_color:(0,0,0,1)
            on_release:
                if root.signing_in() == True:\
                app.root.current = "Main"
                root.manager.transition.direction = 'up'
        #verified
        Button:
            id: create_account
            font_size: root.height * 0.025
            size_hint: 0.54,0.05
            pos_hint:{"top":0.26,"x":0.255}
            text:"Create Account"
            background_color:(0,0,0,1)
            on_release:
                app.root.current = "Create"
                root.manager.transition.direction = 'left'

<CreateAccountScreen>:
    name:"Create"
    go_back: go_back
    username: username
    password: password
    confirmation: confirmation
    create: create

    FloatLayout:
        #verified
        # Back button
        ImageButton:
            id:go_back
            pos_hint:{"top":0.97,"x":0.0613}
            size_hint: 0.035,0.033
            source: "Media/PngItem_2022960.png"
            on_release:
                app.root.current = "Home"
                root.manager.transition.direction = 'right'
        #verified
        Label:
            text:"Welcome!"
            font_size: 30
            size_hint: 0.35,0.18
            pos_hint:{"top":0.88,"x":0.32}
            halign: 'center'
            valign: 'middle'
            color: (0,0,0,1)
        #verified
        Label:
            text:"Thanks for helping to \n keep transportation in our city safe"
            font_size: 15
            size_hint: 0.66,0.054
            pos_hint:{"top":0.76,"x":0.171}
            halign: 'center'
            valign: 'middle'
            color: (0,0,0,1)
        #verified
        Label:
            text:"Let's get your Account set up..."
            font_size: 17
            size_hint: 0.61,0.04
            pos_hint:{"top":0.53,"x":0.193}
            color: (0,0,0,1)
        #verified
        TextInput:
            id: username
            font_size: root.height * 0.025
            size_hint:0.504,0.05
            pos_hint:{"top":0.38,"x":0.22}
            text:"Username"
            multiline: False
        #verified
        TextInput:
            id: password
            font_size: root.height * 0.025
            size_hint: 0.504, 0.05
            pos_hint:{"top":0.31,"x":0.22}
            text:"Password"
            multiline: False
        #verified
        TextInput:
            id: confirmation
            font_size: root.height * 0.025
            size_hint:0.504,0.05
            pos_hint:{"top":0.24,"x":0.22}
            text:"Confirm Password"
            multiline: False
        #verified
        Button:
            id: create
            font_size: 17
            size_hint:0.355,0.05
            pos_hint:{"top":0.15,"x":0.295}
            text:"Create!"
            background_color:(0,0,0,1)
            on_release:
                if root.NewAccountCreation() == True:\
                app.root.current = "Home"
                root.manager.transition.direction = 'right'


<MainScreen>:
    name:"Main"
    FloatLayout:
        # Profile Image / Button
        ImageButton:
            pos_hint: { "center_x":0.5, "center_y":0.73 }
            size_hint: 0.3, 0.3
            source: "Media/pfp_peach.png"
            #canvas:
            #    Ellipse:
            #        source: "Media/pfp_peach.png"
            #        pos: self.pos
            on_release:
                print( "Switching to profile screen..." )
                app.root.current = "Profile"
                root.manager.transition.direction = 'left'
        # Lost and Found Image / Button
        ImageButton:
            pos_hint: { "center_x":0.2, "center_y":0.6 }
            size_hint: 0.3, 0.3
            canvas:
                Ellipse:
                    source: "Media/icon_lnf.png"
                    pos: self.pos
            on_release:
                print( "Switching to LnF screen..." )
                app.root.current = "History"
                #root.manager.transition.direction = 'right'
        # Symptoms Image / Button
        ImageButton:
            pos_hint: { "center_x":0.8, "center_y":0.6 }
            size_hint: 0.3, 0.3
            canvas:
                Ellipse:
                    source: "Media/icon_symptoms.png"
                    pos: self.pos
            on_release:
                print( "Switching to symptoms screen..." )
                #app.root.current = "Profile"
                #root.manager.transition.direction = 'left'
        # Scanner Image / Button
        ImageButton:
            pos_hint: { "center_x":0.5, "center_y":0.4 }
            size_hint: 0.3, 0.3
            canvas:
                Ellipse:
                    source: "Media/icon_scanner.png"
                    pos: self.pos
            on_release:
                print( "Switching to scanner screen..." )
                app.root.current = "Scan"
                root.manager.transition.direction = 'left'


<ProfileScreen>:
    name: "Profile"
    FloatLayout:
        # Back button
        ImageButton:
            pos_hint:{"top":0.97,"x":0.0613}
            size_hint: 0.035,0.033
            source: "Media/PngItem_2022960.png"
            on_release:
                app.root.current = "Main"
                root.manager.transition.direction = 'right'
        # Profile Image
        ImageButton:
            pos_hint: { "center_x":0.5, "center_y":0.73 }
            size_hint: 0.5, 0.5
            source: "Media/pfp_peach.png"
        # "Hello, [name]"
        Label:
            text: "Hello there!"
            font_size: 25
            pos_hint: { "center_x":0.5, "center_y":0.62 }
            color: 1,1,1,1
        # FloatLayout to contain Phone and Email information
        FloatLayout:
            size_hint: ( 1, 0.4 )
            pos_hint: { "center_x":0.5, "center_y":0.5 }
            # "Phone"
            Label:
                text: "Phone"
                font_size: 18
                pos_hint: { "center_x":0.16, "center_y":0.5 }
            # Input for phone number
            TextInput:
                font_size: 16
                size_hint: ( 0.6, 0.1 )
                pos_hint:{ "center_x":0.56, "center_y":0.5 }
                text:"Enter a phone number"
                #on_focus: self.text = ""
                multiline: False
                input_type: 'tel'
                write_tab: False
                #on_text_validate: root.foo()
            # "Email"
            Label:
                text: "Email"
                font_size: 18
                pos_hint: { "center_x":0.17, "center_y":0.35 }
            # Input for email
            TextInput:
                font_size: 16
                size_hint: ( 0.6, 0.1 )
                pos_hint:{ "center_x":0.56, "center_y":0.35 }
                text:"Enter an email"
                #on_focus: self.text = ""
                multiline: False
                input_type: 'mail'
                #on_text_validate: root.foo()
        # Transportation History Button
        Button:
            size_hint: ( 0.6, 0.05 )
            pos_hint: { "center_x":0.5, "center_y":0.3 }
            text: "Transportation History"
            font_size: 18
            color: 0,0,0,1
            background_normal: 'Media/asset.button_normal.png'
            on_release:
                print( "Switching to transportation history screen..." )
                app.root.current = "History"
                root.manager.transition.direction = 'left'
        # Symptom History Button
        Button:
            size_hint: ( 0.6, 0.05 )
            pos_hint: { "center_x":0.5, "center_y":0.23 }
            text: "Symptom History"
            font_size: 18
            color: 0,0,0,1
            background_normal: 'Media/asset.button_normal.png'
            #on_release:
            #    print( "Switching to symptom history screen..." )
            #    app.root.current = ""
            #    root.manager.transition.direction = 'left'
        # Sign out Button, leads to the login page
        Button:
            size_hint: ( 0.4, 0.04 )
            pos_hint: { "center_x":0.5, "center_y":0.1 }
            text: "Sign Out"
            font_size: 14
            color: 0,0,0,1
            background_normal: 'Media/asset.button_warning.png'
            on_release:
                print( "Switching to login screen..." )
                app.root.current = "Home"
                root.manager.transition.direction = 'down'

<TransportationHistoryScreen>:
    name:"History"
    FloatLayout:
        #verified
        # Back button
        ImageButton:
            pos_hint:{"top":0.97,"x":0.0613}
            size_hint: 0.035,0.033
            source: "Media/PngItem_2022960.png"
            on_release:
                app.root.current = "Main"
                root.manager.transition.direction = 'right'
        #verified
        Label:
            text:"Recently Used Transportation"
            font_size: 25
            size_hint:0.88,0.045
            pos_hint:{"top":0.89,"x":0.06}
            color: (0,0,0,1)
        #verified
        Button:
            font_size: 15
            size_hint:0.69,0.11
            pos_hint:{"top":0.77,"x":0.16}
            text:""
            background_normal:''
            background_color:(1,1,1,1)
            on_release:
                app.root.current = "LostItem"
                root.manager.transition.direction = 'left'
        #verified
        Button:
            font_size: 15
            size_hint:0.69,0.11
            pos_hint:{"top":0.573,"x":0.16}
            text:""
            background_normal:''
            background_color:(1,1,1,1)
            on_release:
                app.root.current = "LostItem"
                root.manager.transition.direction = 'left'
        #verified
        Button:
            font_size: 15
            size_hint:0.69,0.11
            pos_hint:{"top":0.384,"x":0.16}
            text:""
            background_normal:''
            background_color:(1,1,1,1)
            on_release:
                app.root.current = "LostItem"
                root.manager.transition.direction = 'left'
        #verified
        Button:
            text:"See more ..."
            size_hint:0.35,0.0435
            pos_hint:{"top":0.21,"x":0.33}
            background_color: (0,0,0,1)
        #verified
        Label:
            text:"If you lost an Item, select the \n transportation to fill a claim"
            size_hint:0.483,0.051
            pos_hint:{"top":0.12,"x":0.26}
            font_size: 14
            color: (0,0,0,1)

<ItemDescriptionScreen>:
    name:"LostItem"
    FloatLayout:
        #verified
        # Back button
        ImageButton:
            pos_hint:{"top":0.97,"x":0.0613}
            size_hint: 0.035,0.033
            source: "Media/PngItem_2022960.png"
            on_release:
                app.root.current = "History"
                root.manager.transition.direction = 'right'
        #verified
        Label:
            text:"Describe your Lost Item"
            font_size: 25
            size_hint:0.70,0.045
            pos_hint:{"top":0.89,"x":0.15}
        #verified
        TextInput:
            text:""
            font_size: 15
            size_hint:0.88,0.31
            pos_hint:{"top":0.81,"x":0.0613}
            multiline: True
        #verified
        Label:
            text:"Best way to contact you?"
            size_hint:0.59,0.081
            pos_hint:{"top":0.4423,"x":0.0613}
            font_size: 20
        #verified
        Button:
            text:"SMS Text"
            size_hint:0.40,0.048
            pos_hint:{"top":0.36,"x":0.0613}
            font_size: 20
            background_color:(0,0,0,1)
        #verified
        Button:
            text:"Phone Call"
            size_hint:0.40,0.048
            pos_hint:{"top":0.26,"x":0.0613}
            font_call: 20
            background_color:(0,0,0,1)
        #verified
        Button:
            text:"Email"
            size_hint:0.40,0.048
            pos_hint:{"top":0.16,"x":0.0613}
            font_call: 20
            background_color:(0,0,0,1)

<ScannerScreen>:
    name:"Scan"
    FloatLayout:
        ImageButton:
            pos_hint:{"top":0.97,"x":0.0613}
            size_hint: 0.035,0.033
            source: "Media/PngItem_2022960.png"
            on_release:
                app.root.current = "Main"
                root.manager.transition.direction = 'right'
        Image:
            source: "Media/corner-icon-8-1.png"
            size_hint:0.26,0.15
            pos_hint:{"top":0.85,"x":0.056}
            background_color:(1,1,1,0)
        Image:
            source: "Media/corner-icon-8-2.png"
            size_hint:0.26,0.15
            pos_hint:{"top":0.85,"x":0.69}
            background_color:(1,1,1,0)
        Image:
            source: "Media/corner-icon-8-3.png"
            size_hint:0.26,0.15
            pos_hint:{"top":0.37,"x":0.056}
            background_color:(1,1,1,0)
        Image:
            source: "Media/corner-icon-8-4.png"
            size_hint:0.26,0.15
            pos_hint:{"top":0.37,"x":0.69}
            background_color:(1,1,1,0)
        Label:
            color: 1,0,1,1
            canvas.before:
                Color:
                    rgba: 0.79, 0.79, 0.79, 0.5
                Rectangle:
                    size:0.63*root.width,0.48*root.height
                    pos:0.189*root.width,0.295*root.height
        Label:
            text:"Align the QR Code in the above \n rectangle to scan."
            size_hint:0.733,0.072
            pos_hint:{"top":0.21,"x":0.13}
            color: 0,0,0,1
            halign: 'center'
            valign: 'middle'
            font_size:20
